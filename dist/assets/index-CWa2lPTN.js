(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const e of c.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&a(e)}).observe(document,{childList:!0,subtree:!0});function m(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=m(o);fetch(o.href,c)}})();const z=60,R=.5,p=60/z,G=R*p,H=R*p,x=256,W=16,_=x*p,I=document.querySelector("button"),L=n=>1+n/8,V=1/3,S=p/3*2,Q=n=>440*Math.pow(2,n/12),U=(n,s,m)=>{const a=n.createOscillator();a.frequency.value=Q(m);const o=s+H;a.start(s),a.stop(o),a.detune.value=(Math.random()-.5)*10;const c=n.createGain();return c.gain.setValueAtTime(0,s),c.gain.linearRampToValueAtTime(1,s+G/1024),c.gain.linearRampToValueAtTime(.2,s+G/16),c.gain.linearRampToValueAtTime(0,o),setTimeout(()=>a.disconnect(),o*1e3+1e3),a.connect(c)};function X(n,s,m,a,o){const c=new AnalyserNode(n,{fftSize:2048,smoothingTimeConstant:1}),e=new DynamicsCompressorNode(n,{threshold:-40,knee:40,ratio:4,attack:0,release:p/8});e.connect(c),c.connect(s);const T=new DelayNode(n,{maxDelayTime:S,delayTime:S}),w=new DelayNode(n,{maxDelayTime:S,delayTime:S}),A=new GainNode(n,{gain:V}),v=new GainNode(n,{gain:V}),y=new BiquadFilterNode(n,{type:"lowpass",frequency:500,Q:24});y.connect(e),T.connect(v).connect(w).connect(new StereoPannerNode(n,{pan:-1})).connect(e),w.connect(A).connect(T).connect(new StereoPannerNode(n,{pan:1})).connect(e);for(let t=0;t<x;t++)if(Math.floor(t/W%2))for(let i=0;i<o.length;i++){const l=L(i),g=m+t*l*p;if(g>=m+_)break;U(n,g,o[i]).connect(y).connect(t%2?v:A)}else for(let i=0;i<a.length;i++){const l=L(i),g=m+t*l*p;if(g>=m+_)break;U(n,g,a[i]).connect(y).connect(t%2?v:A)}const r=document.querySelector("canvas");if(!r)throw Error("canvas missing");const f=(t,i)=>{const l=r.getBoundingClientRect(),g=t-l.left,E=i-l.top,q=Math.max(0,Math.min(1,g/l.width));y.frequency.value=20+q**2*4e3;const M=Math.max(0,Math.min(1,1-E/l.height));y.Q.value=M*36};return r.onmousemove=t=>f(t.clientX,t.clientY),r.addEventListener("touchmove",t=>{t.preventDefault(),t.touches.length&&f(t.touches[0].clientX,t.touches[0].clientY)},{passive:!1}),c}const O=n=>getComputedStyle(document.documentElement).getPropertyValue(n).trim(),d=document.querySelector("canvas");if(!d)throw Error("canvas missing");d.hidden=!0;let u=512,h=512,b=Math.min(h,u);d.height=u;d.width=h;document.addEventListener("fullscreenchange",()=>{document.fullscreenElement===d?(h=window.screen.width,u=window.screen.height):(h=512,u=512),b=Math.min(h,u),d.width=h,d.height=u});d.addEventListener("click",()=>{if(document.fullscreenElement){document.exitFullscreen();return}d.requestFullscreen()});function j(n,s,m,a,o,c){if(!d)throw Error("canvas missing");const e=d.getContext("2d");if(d.hidden=!1,!e)throw Error("failed to get 2d rendering context");const T=c.frequencyBinCount,w=new Uint8Array(T),A=()=>{c.getByteTimeDomainData(w),e.lineWidth=3,e.strokeStyle=O("--color-figure"),e.globalAlpha=1/8,e.beginPath();const r=h/T;let f=0;for(let t=0;t<T;t++){const i=w[t]/128,l=(u+i*u)/4;t===0?e.moveTo(f,l):e.lineTo(f,l),f+=r}e.lineTo(h,u/2),e.stroke(),e.globalAlpha=1,e.lineWidth=1},v=(r,f,t,i,l,g)=>{const E=Math.min(...r),M=Math.max(...r)-E;for(let P=0;P<r.length;P++){const B=L(P);let F=!1;l&&(F=i/p%B<=R);const D=b*.2*(r[P]+M/10+Math.abs(E))/M*1.1;e.beginPath(),e.arc(f,t,D,0,2*Math.PI),e.stroke();const C=(g?1:-1)*(i/p/B*2*Math.PI-(g?1:-1)*Math.PI/2);e.beginPath(),e.arc(D*Math.cos(C)+f,D*Math.sin(C)+t,b/r.length/16,0,2*Math.PI),e.fillStyle=O(F?"--color-accent":"--color-figure"),e.fill()}},y=()=>{const r=n.currentTime-s;if(r>_){e.clearRect(0,0,h,u),document.fullscreenElement&&document.exitFullscreen(),d.hidden=!0,o(),document.body.prepend(I);return}if(requestAnimationFrame(y),r<0)return;e.strokeStyle=O("--color-figure"),e.clearRect(0,0,h,u),A();const f=Math.floor(r/p),t=Math.floor(f/W%2)===1;v(m,h/4,u/2,r,!t,!0),v(a,3*h/4,u/2,r,t,!1)};requestAnimationFrame(y)}const Y=[-17,-10,2,10,14],k=[-21,3,7,10,19];let N;I.onclick=()=>{I.remove(),N||(N=new AudioContext);const n=new GainNode(N,{gain:.1});n.connect(N.destination);const s=N.currentTime+.1,m=X(N,n,s,Y,k);j(N,s,Y,k,()=>n.disconnect(),m)};
